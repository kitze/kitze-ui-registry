{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "bottom-drawer",
  "type": "registry:component",
  "title": "Bottom Drawer",
  "description": "A mobile-friendly bottom drawer component built on top of Vaul, including a menu variant.",
  "registryDependencies": [
    "https://ui.kitze.io/r/simple-dropdown-menu.json",
    "https://ui.kitze.io/r/kitze-ui-context.json"
  ],
  "dependencies": [
    "vaul",
    "framer-motion"
  ],
  "files": [
    {
      "path": "registry/new-york/bottom-drawer/BottomDrawer.tsx",
      "type": "registry:component",
      "content": "import React from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport { ReactFC, cn } from \"@/lib/utils\";\nimport { Drawer } from \"vaul\";\nimport { DrawerContext } from \"@/registry/new-york/bottom-drawer/DrawerContext\";\nimport { useControlledOpen } from \"@/registry/hooks/useControlledOpen\";\n\nexport interface BottomDrawerClassNames {\n  overlay?: string;\n  content?: string;\n  handle?: string;\n  title?: string;\n  headerWrapper?: string;\n  childrenWrapper?: string;\n}\n\nexport interface BottomDrawerProps {\n  title?: string;\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  trigger?: React.ReactNode;\n  classNames?: BottomDrawerClassNames;\n  renderHeader?:\n    | ((props: {\n        handle: React.ReactNode;\n        close: () => void;\n      }) => React.ReactNode)\n    | null;\n}\n\nexport const BottomDrawer: ReactFC<BottomDrawerProps> = ({\n  children,\n  title,\n  open,\n  onOpenChange,\n  trigger,\n  classNames,\n  renderHeader,\n}) => {\n  const { isOpen, setIsOpen, close } = useControlledOpen({\n    open,\n    onOpenChange,\n  });\n\n  const handle = (\n    <div\n      className={cn(\n        \"mx-auto w-12 h-1.5 flex-shrink-0 rounded-full bg-zinc-300 dark:bg-zinc-700 mb-8\",\n        classNames?.handle\n      )}\n    />\n  );\n\n  const defaultHeader = (\n    <>\n      {handle}\n      {title && (\n        <div\n          className={cn(\n            \"text-lg font-semibold mb-4 text-zinc-900 dark:text-white\",\n            classNames?.title\n          )}\n        >\n          {title}\n        </div>\n      )}\n    </>\n  );\n\n  const noHeader = renderHeader === null;\n\n  return (\n    <DrawerContext.Provider value={{ close }}>\n      <Drawer.Root open={isOpen} onOpenChange={setIsOpen}>\n        <AnimatePresence>\n          {isOpen && (\n            <motion.div\n              initial={{ scale: 1 }}\n              animate={{ scale: 0.95 }}\n              exit={{ scale: 1 }}\n              transition={{ duration: 0.3, ease: \"easeInOut\" }}\n              className=\"fixed inset-0 z-30 pointer-events-none\"\n            >\n              <div className=\"w-full h-full origin-top\">\n                <div className=\"h-full overflow-hidden\">\n                  <div className=\"opacity-0\">{trigger}</div>\n                </div>\n              </div>\n            </motion.div>\n          )}\n        </AnimatePresence>\n\n        <Drawer.Trigger asChild>{trigger}</Drawer.Trigger>\n\n        <Drawer.Portal>\n          <Drawer.Overlay\n            className={cn(\n              \"fixed inset-0 bg-black/40 backdrop-blur-md dark:bg-black/60 z-[9999]\",\n              classNames?.overlay\n            )}\n          />\n          <Drawer.Content\n            className={cn(\n              \"bg-white dark:bg-zinc-900 w-[95%] flex flex-col rounded-t-[10px] fixed bottom-0 left-0 right-0 z-[9999] mx-auto\",\n              \"dark:border-t dark:border-zinc-800\",\n              \"max-w-[500px]\",\n              classNames?.content,\n              {\n                \"pt-6\": !noHeader,\n              }\n            )}\n          >\n            {!noHeader && (\n              <div\n                className={cn(\n                  \"px-4 bg-white dark:bg-zinc-900 rounded-t-[10px]\",\n                  classNames?.headerWrapper\n                )}\n              >\n                {renderHeader ? renderHeader({ handle, close }) : defaultHeader}\n              </div>\n            )}\n            <div\n              className={cn(\n                \"px-2 pb-6 pt-0 md:pb-2 bg-white dark:bg-zinc-900 flex-1 overflow-y-auto\",\n                noHeader && \"pt-6 rounded-t-[10px]\",\n                classNames?.childrenWrapper\n              )}\n            >\n              {children}\n            </div>\n          </Drawer.Content>\n        </Drawer.Portal>\n      </Drawer.Root>\n    </DrawerContext.Provider>\n  );\n};\n"
    },
    {
      "path": "registry/new-york/bottom-drawer/BottomDrawerMenu.tsx",
      "type": "registry:component",
      "content": "import React from \"react\";\nimport { ReactFC } from \"@/lib/utils\";\nimport { BottomDrawer } from \"./BottomDrawer\";\nimport { MenuProvider } from \"@/registry/new-york/menu-context/MenuContext\";\nimport { useControlledOpen } from \"@/registry/hooks/useControlledOpen\";\nimport {\n  BottomDrawerMenuItem,\n  BottomDrawerMenuItemProps,\n} from \"./BottomDrawerMenuItem\";\nimport { BottomDrawerMenuItems } from \"./BottomDrawerMenuComponents\";\n\nexport interface BottomDrawerMenuProps {\n  children: React.ReactNode;\n  content?: React.ReactNode;\n  items?: (Omit<BottomDrawerMenuItemProps, \"children\"> & { label: string })[];\n  title?: string;\n  open?: boolean;\n  onOpenChange?: (open: boolean) => void;\n  closeOnClick?: boolean;\n}\n\nexport const BottomDrawerMenu: ReactFC<BottomDrawerMenuProps> = ({\n  children,\n  content,\n  items,\n  title,\n  open,\n  onOpenChange,\n  closeOnClick = true,\n}) => {\n  const { isOpen, setIsOpen, close } = useControlledOpen({\n    open,\n    onOpenChange,\n  });\n\n  // Function to close the menu when clicking on menu items\n  const closeMenu = () => {\n    if (closeOnClick) {\n      close();\n    }\n  };\n\n  // Determine what to render inside the drawer\n  let drawerContent = content;\n\n  // If items array is provided, render them as BottomDrawerMenuItems\n  if (items && items.length > 0) {\n    drawerContent = (\n      <BottomDrawerMenuItems>\n        {items.map((item, index) => {\n          const { label, ...itemProps } = item;\n          return (\n            <BottomDrawerMenuItem key={index} {...itemProps}>\n              {label}\n            </BottomDrawerMenuItem>\n          );\n        })}\n      </BottomDrawerMenuItems>\n    );\n  }\n\n  return (\n    <BottomDrawer\n      title={title}\n      trigger={children}\n      open={isOpen}\n      onOpenChange={setIsOpen}\n      classNames={{\n        childrenWrapper: \"px-0\",\n      }}\n    >\n      <MenuProvider menuType=\"bottom-drawer\" closeMenu={closeMenu}>\n        {drawerContent}\n      </MenuProvider>\n    </BottomDrawer>\n  );\n};\n"
    },
    {
      "path": "registry/new-york/bottom-drawer/DrawerContext.tsx",
      "type": "registry:component",
      "content": "import { createContext, useContext } from \"react\";\n\ninterface DrawerContextType {\n  close: () => void;\n}\n\nexport const DrawerContext = createContext<DrawerContextType | null>(null);\n\nexport const useDrawer = () => {\n  const context = useContext(DrawerContext);\n  if (!context) {\n    throw new Error(\"useDrawer must be used within a DrawerProvider\");\n  }\n  return context;\n};\n"
    },
    {
      "path": "registry/new-york/bottom-drawer/BottomDrawerMenuItem.tsx",
      "type": "registry:component",
      "content": "import React from \"react\";\nimport { ReactFC, cn } from \"@/lib/utils\";\nimport { LucideIcon } from \"lucide-react\";\nimport { HelpInfoCircle } from \"@/registry/new-york/help-info-circle/HelpInfoCircle\";\nimport { useMenuContext } from \"../menu-context/MenuContext\";\n\nexport interface BottomDrawerMenuItemProps {\n  children: React.ReactNode;\n  leftIcon?: LucideIcon;\n  rightIcon?: LucideIcon;\n  emoji?: string;\n  className?: string;\n  disabled?: boolean;\n  destructive?: boolean;\n  onClick?: () => void;\n  href?: string;\n  external?: boolean;\n  isLast?: boolean;\n  shortcut?: string;\n  hint?: string;\n  closeOnClick?: boolean;\n}\n\nexport const BottomDrawerMenuItem: ReactFC<BottomDrawerMenuItemProps> = ({\n  children,\n  leftIcon: LeftIcon,\n  rightIcon: RightIcon,\n  emoji,\n  className,\n  disabled,\n  destructive,\n  onClick,\n  href,\n  external,\n  isLast,\n  shortcut,\n  hint,\n  closeOnClick = true,\n}) => {\n  const { closeMenu } = useMenuContext();\n  const Component = href ? (external ? \"a\" : \"a\") : \"button\";\n  const linkProps = href\n    ? {\n        href,\n        ...(external && {\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n        }),\n      }\n    : {};\n\n  const iconClasses = cn(\n    \"h-5 w-5\",\n    \"text-muted-foreground\",\n    destructive && \"text-destructive\"\n  );\n\n  const itemClasses = cn(\n    \"flex items-center w-full px-4 py-3 text-base\",\n    \"transition-colors active:bg-zinc-50 dark:active:bg-zinc-800/50\",\n    \"text-left justify-start\",\n    disabled && \"opacity-50 pointer-events-none\",\n    destructive && \"text-destructive\",\n    className\n  );\n\n  return (\n    <Component\n      className={itemClasses}\n      onClick={() => {\n        onClick?.();\n        if (closeOnClick) {\n          closeMenu?.();\n        }\n      }}\n      disabled={disabled && Component === \"button\"}\n      {...linkProps}\n    >\n      {emoji ? (\n        <span className=\"mr-3 flex-shrink-0 text-base\">{emoji}</span>\n      ) : LeftIcon ? (\n        <LeftIcon className={cn(\"mr-3 flex-shrink-0\", iconClasses)} />\n      ) : null}\n      <span className=\"flex-1\">{children}</span>\n      {hint && (\n        <div className=\"ml-2 flex-shrink-0\">\n          <HelpInfoCircle\n            content={hint}\n            drawerTitle=\"Help\"\n            iconClassName={destructive ? \"text-destructive\" : \"\"}\n          />\n        </div>\n      )}\n      {RightIcon && (\n        <RightIcon className={cn(\"ml-auto flex-shrink-0\", iconClasses)} />\n      )}\n    </Component>\n  );\n};\n"
    },
    {
      "path": "registry/new-york/bottom-drawer/BottomDrawerMenuComponents.tsx",
      "type": "registry:component",
      "content": "import React from \"react\";\nimport { ReactFC, cn } from \"@/lib/utils\";\n\n// Label\nexport interface BottomDrawerMenuLabelProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport const BottomDrawerMenuLabel: ReactFC<BottomDrawerMenuLabelProps> = ({\n  children,\n  className,\n}) => {\n  return (\n    <div\n      className={cn(\n        \"px-4 py-2 text-sm font-medium text-zinc-500 dark:text-zinc-400 text-left\",\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n\n// Separator\nexport interface BottomDrawerMenuSeparatorProps {\n  className?: string;\n}\n\nexport const BottomDrawerMenuSeparator: ReactFC<\n  BottomDrawerMenuSeparatorProps\n> = ({ className }) => {\n  return (\n    <div\n      className={cn(\n        \"h-[1px] my-1 bg-zinc-100 dark:bg-zinc-800 w-full\",\n        className\n      )}\n    />\n  );\n};\n\n// Group\nexport interface BottomDrawerMenuGroupProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport const BottomDrawerMenuGroup: ReactFC<BottomDrawerMenuGroupProps> = ({\n  children,\n  className,\n}) => {\n  return (\n    <div className={cn(\"flex flex-col w-full\", className)}>{children}</div>\n  );\n};\n\n// MenuItems - Container with divide-y styling\nexport interface BottomDrawerMenuItemsProps {\n  children: React.ReactNode;\n  className?: string;\n}\n\nexport const BottomDrawerMenuItems: ReactFC<BottomDrawerMenuItemsProps> = ({\n  children,\n  className,\n}) => {\n  return (\n    <div\n      className={cn(\n        \"flex flex-col divide-y divide-zinc-100 dark:divide-zinc-800\",\n        className\n      )}\n    >\n      {children}\n    </div>\n  );\n};\n\n// Group with title and items\nexport interface BottomDrawerGroupProps {\n  title?: string;\n  children: React.ReactNode;\n  className?: string;\n  titleClassName?: string;\n}\n\nexport const BottomDrawerGroup: ReactFC<BottomDrawerGroupProps> = ({\n  title,\n  children,\n  className,\n  titleClassName,\n}) => {\n  return (\n    <div className={cn(\"flex flex-col w-full\", className)}>\n      {title && (\n        <BottomDrawerMenuLabel className={titleClassName}>\n          {title}\n        </BottomDrawerMenuLabel>\n      )}\n      <BottomDrawerMenuItems>{children}</BottomDrawerMenuItems>\n    </div>\n  );\n};\n"
    }
  ]
}